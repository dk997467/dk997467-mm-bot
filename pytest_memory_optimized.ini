# Pytest Configuration - Memory Optimized for CI
# This configuration minimizes pytest's memory footprint

[pytest]
# Disable unnecessary plugins to save memory
addopts = 
    # Minimal output (saves memory from buffering)
    -q
    
    # Don't cache test results (saves memory)
    -p no:cacheprovider
    
    # Disable terminal reporting optimizations
    --tb=short
    
    # Don't collect/show warnings (saves memory)
    -p no:warnings
    
    # Exit on first failure (fail-fast to save resources)
    # --maxfail=1
    
    # Show local variables only on failure (not always)
    --showlocals
    
    # Disable doctest module
    -p no:doctest
    
    # Disable assertion rewriting (slightly faster, less memory)
    --assert=plain

# Don't collect __pycache__ or test cache
norecursedirs = .* build dist CVS _darcs {arch} *.egg __pycache__ .pytest_cache

# Minimal log level
log_cli = false
log_cli_level = CRITICAL

# Don't keep test reports in memory
junit_logging = no

# Python warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

