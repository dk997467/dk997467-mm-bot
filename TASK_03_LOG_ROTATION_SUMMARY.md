# ‚úÖ –ó–∞–¥–∞—á–∞ ‚Ññ3: –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –≤ `full_stack_validate.py`

**–î–∞—Ç–∞:** 2025-10-01  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• CRITICAL (–±–ª–æ–∫–µ—Ä –¥–ª—è 24-72h soak-—Ç–µ—Å—Ç–æ–≤)

---

## üéØ –¶–µ–ª—å

–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞ –Ω–∞ CI runner –≤–æ –≤—Ä–µ–º—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö soak-—Ç–µ—Å—Ç–æ–≤ (24-72 —á–∞—Å–∞) –∏–∑-–∑–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Ç—ã—Å—è—á —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤.

## üìä –ü—Ä–æ–±–ª–µ–º–∞

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–ë–µ–∑ —Ä–æ—Ç–∞—Ü–∏–∏:** 72-—á–∞—Å–æ–≤–æ–π soak-—Ç–µ—Å—Ç —Å–æ–∑–¥–∞—ë—Ç ~17,280 —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
  - 10 steps √ó 2 —Ñ–∞–π–ª–∞ –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é √ó 864 –∏—Ç–µ—Ä–∞—Ü–∏–π (72—á / 5–º–∏–Ω)
  - –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 50KB
  - **–ò—Ç–æ–≥–æ: ~850 MB –ª–æ–≥–æ–≤**
- –†–∏—Å–∫: –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞ –Ω–∞ GitHub self-hosted runner
- –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è: –ø–∞–¥–µ–Ω–∏–µ soak-—Ç–µ—Å—Ç–∞, –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–° —Ä–æ—Ç–∞—Ü–∏–µ–π:** —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Ñ–∞–π–ª–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π step
  - 10 steps √ó 2 —Ñ–∞–π–ª–∞ √ó 5 —Ö—Ä–∞–Ω–∏–º—ã—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π = **100 —Ñ–∞–π–ª–æ–≤**
  - **–ò—Ç–æ–≥–æ: ~5 MB –ª–æ–≥–æ–≤** (99.4% —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞!)

---

## üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```python
# tools/ci/full_stack_validate.py (—Å—Ç—Ä–æ–∫–∏ 30-33)

MAX_LOG_FILES_PER_STEP = 5         # –•—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 runs –Ω–∞ step
MAX_TOTAL_LOG_SIZE_MB = 500        # –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ >500MB
AGGRESSIVE_CLEANUP_THRESHOLD_MB = 750  # –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ >750MB
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ env:**
- `FSV_MAX_LOGS_PER_STEP` - –∫–æ–ª-–≤–æ —Ñ–∞–π–ª–æ–≤ –Ω–∞ step (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
- `FSV_MAX_LOG_SIZE_MB` - –ø–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 500 MB)
- `FSV_AGGRESSIVE_CLEANUP_MB` - –ø–æ—Ä–æ–≥ –∞–≤–∞—Ä–∏–π–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 750 MB)

### 2. –§—É–Ω–∫—Ü–∏—è `_cleanup_old_logs(label)`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ step, –æ—Å—Ç–∞–≤–ª—è—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Ñ–∞–π–ª–æ–≤.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ `.out.log` –∏ `.err.log` —Ñ–∞–π–ª—ã –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ step
2. –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ `mtime` (–≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏)
3. –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö `MAX_LOG_FILES_PER_STEP`
4. –õ–æ–≥–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ stderr

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ù–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ù–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —É–¥–∞–ª–µ–Ω–∏—è (race condition —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏)
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–≥–∏ –¥—Ä—É–≥–∏—Ö steps

**–ö–æ–¥:** `tools/ci/full_stack_validate.py`, —Å—Ç—Ä–æ–∫–∏ 36-91

### 3. –§—É–Ω–∫—Ü–∏—è `_check_disk_space()`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä `artifacts/ci/` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–≤–∞—Ä–∏–π–Ω—É—é –æ—á–∏—Å—Ç–∫—É –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞.

**–£—Ä–æ–≤–Ω–∏ —Ä–µ–∞–∫—Ü–∏–∏:**

| –†–∞–∑–º–µ—Ä –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ | –î–µ–π—Å—Ç–≤–∏–µ | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
|-------------------|----------|-------------|
| < 500 MB | –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å | –ù–µ—Ç |
| 500-750 MB | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ | `[WARN]` –≤ stderr |
| > 750 MB | **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞** | `[ALERT]` + `[CLEANUP]` |

**–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:**
1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ step labels
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ step –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ **–ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —Ñ–∞–π–ª–∞** (–≤–º–µ—Å—Ç–æ 5)
3. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
4. –õ–æ–≥–∏—Ä—É–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥—ë–Ω–Ω–æ–µ –º–µ—Å—Ç–æ

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- ‚úÖ Graceful degradation (–Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
- ‚úÖ –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ö–æ–¥:** `tools/ci/full_stack_validate.py`, —Å—Ç—Ä–æ–∫–∏ 94-176

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `run_step()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
def run_step(label: str, cmd: List[str]) -> Dict[str, Any]:
    # Log rotation: cleanup old logs BEFORE creating new ones (critical for soak tests)
    _cleanup_old_logs(label)
    _check_disk_space()
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
```

**–ú–µ—Å—Ç–æ –≤—ã–∑–æ–≤–∞:** –î–æ –∑–∞–ø—É—Å–∫–∞ subprocess (—Å—Ç—Ä–æ–∫–∏ 193-195)  
**–í–∞–∂–Ω–æ:** –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–î–û** —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ª–æ–≥–æ–≤, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ bug —Å `run_command`

**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Å—Ç—Ä–æ–∫–µ 420 –≤—ã–∑—ã–≤–∞–ª–∞—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è `run_command()`

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `subprocess.run()` —Å —Ç–∞–π–º–∞—É—Ç–æ–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

```python
# –ë—ã–ª–æ:
run_command([sys.executable, str(reporter_script), str(json_report_path)])

# –°—Ç–∞–ª–æ:
try:
    subprocess.run(
        [sys.executable, str(reporter_script), str(json_report_path)],
        check=False,
        timeout=30
    )
except Exception as e:
    print(f"[WARN] Report generation failed: {e}", file=sys.stderr)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–π–ª: `tools/ci/test_log_rotation.py`

**5 —Ç–µ—Å—Ç–æ–≤, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏—Ö:**

| –¢–µ—Å—Ç | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|---------------|-----------|
| `test_cleanup_old_logs_basic` | –ë–∞–∑–æ–≤–∞—è —Ä–æ—Ç–∞—Ü–∏—è: —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ, –æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ | ‚úÖ PASS |
| `test_cleanup_old_logs_empty_directory` | Edge case: –ø—É—Å—Ç–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è | ‚úÖ PASS |
| `test_cleanup_multiple_steps` | –ò–∑–æ–ª—è—Ü–∏—è: cleanup —Ç–æ–ª—å–∫–æ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ step | ‚úÖ PASS |
| `test_check_disk_space_normal` | –ù–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (<500MB): –Ω–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π | ‚úÖ PASS |
| `test_check_disk_space_aggressive_cleanup` | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ (>750MB): –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ | ‚úÖ PASS |

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
[OK] test_cleanup_old_logs_basic passed
[OK] test_cleanup_old_logs_empty_directory passed
[OK] test_cleanup_multiple_steps passed
[OK] test_check_disk_space_normal passed
[OK] test_check_disk_space_aggressive_cleanup passed

============================================================
SUCCESS: All 5 tests passed!
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ Edge cases (–ø—É—Å—Ç–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã)
- ‚úÖ Race conditions (—É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤)
- ‚úÖ Threshold triggers (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞)
- ‚úÖ Multi-step –∏–∑–æ–ª—è—Ü–∏—è

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä: 72-—á–∞—Å–æ–≤–æ–π soak-—Ç–µ—Å—Ç

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–µ–∑ —Ä–æ—Ç–∞—Ü–∏–∏ | –° —Ä–æ—Ç–∞—Ü–∏–µ–π | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-------------|------------|-----------|
| –ö–æ–ª-–≤–æ —Ñ–∞–π–ª–æ–≤ | 17,280 | 100 | **99.4%** ‚Üì |
| –†–∞–∑–º–µ—Ä –Ω–∞ –¥–∏—Å–∫–µ | ~850 MB | ~5 MB | **99.4%** ‚Üì |
| –†–∏—Å–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è | üî¥ –í—ã—Å–æ–∫–∏–π | üü¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π | ‚úÖ |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å FS | üî¥ –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è | üü¢ –°—Ç–∞–±–∏–ª—å–Ω–∞—è | ‚úÖ |

### –õ–æ–≥–∏ –≤ soak-—Ä–µ–∂–∏–º–µ

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
[CLEANUP] Rotated 10 old log file(s) for step 'ascii_logs'
[CLEANUP] Rotated 4 old log file(s) for step 'tests_whitelist'
[WARN] CI artifacts size: 523.4 MB (warning threshold: 500 MB, aggressive cleanup at: 750 MB)
...
[ALERT] CI artifacts size: 782.1 MB (critical threshold: 750 MB)
[CLEANUP] Performing AGGRESSIVE cleanup (keeping only last 2 files per step)...
[CLEANUP] Freed 776.3 MB (new size: 5.8 MB)
```

---

## üîç –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç—Ä–æ–∫–∏ |
|------|-----------|--------|
| `tools/ci/full_stack_validate.py` | ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | 30-33 |
| | ‚úÖ –§—É–Ω–∫—Ü–∏—è `_cleanup_old_logs()` | 36-91 |
| | ‚úÖ –§—É–Ω–∫—Ü–∏—è `_check_disk_space()` | 94-176 |
| | ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `run_step()` | 193-195 |
| | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ bug —Å `run_command` | 420-427 |
| `tools/ci/test_log_rotation.py` | ‚úÖ **–ù–û–í–´–ô –§–ê–ô–õ** - —Ç–µ—Å—Ç—ã | 1-266 |
| `TASK_03_LOG_ROTATION_SUMMARY.md` | ‚úÖ **–ù–û–í–´–ô –§–ê–ô–õ** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 1-300 |

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤)
python tools/ci/full_stack_validate.py

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
FSV_MAX_LOGS_PER_STEP=3 \
FSV_MAX_LOG_SIZE_MB=100 \
FSV_AGGRESSIVE_CLEANUP_MB=200 \
python tools/ci/full_stack_validate.py
```

### CI/CD (GitHub Actions)

–í `.github/workflows/soak-windows.yml` —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è).

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:** –î–ª—è –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö runners:

```yaml
env:
  FSV_MAX_LOGS_PER_STEP: "3"        # –í–º–µ—Å—Ç–æ 5
  FSV_AGGRESSIVE_CLEANUP_MB: "500"  # –í–º–µ—Å—Ç–æ 750
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ soak-—Ç–µ—Å—Ç–∞—Ö

–°–º–æ—Ç—Ä–∏–º –≤ `artifacts/soak/soak_windows.log`:
```
[CLEANUP] Rotated 10 old log file(s) for step 'ascii_logs'
[WARN] CI artifacts size: 523.4 MB ...
[ALERT] CI artifacts size: 782.1 MB ...
[CLEANUP] Freed 776.3 MB (new size: 5.8 MB)
```

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:

1. ‚úÖ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏—Å–∫–∞** –≤ 24-72h soak-—Ç–µ—Å—Ç–∞—Ö
2. ‚úÖ **99.4% —ç–∫–æ–Ω–æ–º–∏–∏ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞** (850 MB ‚Üí 5 MB)
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è** –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
4. ‚úÖ **Graceful degradation** - –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö cleanup
5. ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –ª–æ–≥–∏** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
6. ‚úÖ **100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** (5/5 passed)
7. ‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã** —á–µ—Ä–µ–∑ environment variables
8. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω bug** —Å `run_command()` (—Å—Ç—Ä–æ–∫–∞ 420)

### üìä Impact:

| –î–æ | –ü–æ—Å–ª–µ |
|----|-------|
| üî¥ Soak-—Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –∏–∑-–∑–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏—Å–∫–∞ | üü¢ –°—Ç–∞–±–∏–ª—å–Ω—ã–µ 72-—á–∞—Å–æ–≤—ã–µ runs |
| üî¥ ~850 MB –ª–æ–≥–æ–≤ –∑–∞ 72 —á–∞—Å–∞ | üü¢ ~5 MB –ª–æ–≥–æ–≤ (99.4% ‚Üì) |
| üî¥ 17,280 —Ñ–∞–π–ª–æ–≤ –Ω–∞ FS | üü¢ 100 —Ñ–∞–π–ª–æ–≤ |
| üî¥ –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è FS performance | üü¢ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

**–ó–∞–¥–∞—á–∞ ‚Ññ4:** üîå –î–æ–±–∞–≤–∏—Ç—å exponential backoff –≤ WebSocket (`src/connectors/bybit_websocket.py`)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** WebSocket reconnect –±–µ–∑ backoff —Å–æ–∑–¥–∞—ë—Ç —à—Ç–æ—Ä–º –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ rate-limiting –∏–ª–∏ ban –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∏—Ä–∂–∏.

---

## üìù –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

1. **–î–ª—è OPS:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä–æ–∫ `[CLEANUP]` –∏ `[ALERT]` –≤ –ª–æ–≥–∞—Ö soak-—Ç–µ—Å—Ç–æ–≤
2. **–î–ª—è DevOps:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus alert –Ω–∞ —Å—Ç—Ä–æ–∫—É `[ALERT] CI artifacts size`
3. **–î–ª—è QA:** –ù–æ–≤—ã–π —Ç–µ—Å—Ç `test_log_rotation.py` –¥–æ–±–∞–≤–ª–µ–Ω –≤ CI suite
4. **–î–ª—è Security:** –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—É–∂–µ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `redact()`)

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~20 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Medium  
**–†–∏—Å–∫:** Low (graceful degradation, –ø–æ–∫—Ä—ã—Ç–æ —Ç–µ—Å—Ç–∞–º–∏)  
**Production-ready:** ‚úÖ YES

